{"version":3,"file":"d3-bullet-cvs.js","sources":["../src/bullet-cvs.js"],"sourcesContent":["import { axisBottom as d3AxisBottom } from 'd3-axis';\nimport { scaleLinear as d3ScaleLinear, scaleQuantize as d3ScaleQuantize } from 'd3-scale';\nimport { select as d3Select, mouse as d3Mouse } from 'd3-selection';\nimport { timerFlush as d3TimerFlush } from 'd3-timer';\nimport 'd3-transition';\nimport { schemeSet1 as d3SchemeSet1 } from 'd3-scale-chromatic';\n\n/**\n * Make a data structure to hold several bullet charts in one row, so to have a global\n * progress bar\n * @return {bulCVS}\n */\nexport default function () {\n  let maxresults = function (d) {return d.maxresults;};\n  let results = function (d) {return d.results;};\n  let rlabels = function (d) {return d.rlabels;};\n  let data = {};\n  let width = 960;\n  let height = 100;\n  let innerWidth = function () { return width - margins.left - margins.right; };\n  let innerHeight = function () { return height - margins.top - margins.bottom; };\n  let margins = { top: 10, right: 5, bottom: 20, left: 5 };\n  let graphMarginH = 5;\n\n  // For each small multipleâ€¦\n  function bulCVS (svgitem) {\n\n    let graphWidth = innerWidth() / data.length - graphMarginH * 2;\n    let g = svgitem\n      .attr('width', width)\n      .attr('height', height)\n      .selectAll('g') // Map data to an inner g in the svgitem\n      .data(data)\n      .enter()\n      .append('g')\n      .attr('class', 'bullet-cvs');\n\n    g.each(function (d, i) {\n      let cmaxresults = maxresults(d);\n      let cresults = results(d);\n      let crlabels = rlabels(d);\n      let currentg = d3Select(this);\n      let extentX;\n      let extentY;\n\n      let wrap = currentg.select('g.wrap');\n      if (wrap.empty()) wrap = currentg.append('g').attr('class', 'wrap');\n\n      extentX = graphWidth;\n      extentY = innerHeight();\n\n      // Compute the new x-scale.\n      const domainMaxRange = Math.max(Math.max.apply(null, cmaxresults), Math.max.apply(null, cresults));\n      const scaleX = d3ScaleLinear()\n        .domain([0, domainMaxRange])\n        .range([0, extentX]);\n\n      let resultsColorScheme = d3SchemeSet1;\n      let maxResultColorScheme = d3SchemeSet1;\n\n      // Derive width-scales from the x-scales.\n      let mstwidth = bulCVSWidth(scaleX); // End width\n\n      let baseStrokeWidth = 2;\n      let baseArrowSize = 10;\n      let barHeight = function (index, factor) { return (extentY / (index / 4 + 1)) / factor; };\n      let markHeight = function (index) { return extentY; };\n      let middlePosition = function (currentHeight, totalHeight) { return totalHeight / 2 - currentHeight / 2; };\n\n      // Draw the track background for max result markers\n      wrap\n        .selectAll('rect.maxresults')\n        .data(cmaxresults)\n        .enter()\n        .append('rect')\n        .attr('class', 'maxresults')\n        .attr('width', mstwidth)\n        .style('fill', (_d, index) => maxResultColorScheme[index])\n        .style('fill-opacity', '0.3')\n        .attr('height', extentY)\n        .attr('x', 0)\n        .attr('y', 0);\n\n      // Draw the result rects\n      // Build Tootipes\n      let restip = d3Tooltip(function (d, index) {return crlabels[index]; });\n      wrap\n        .selectAll('rect.result')\n        .data(cresults)\n        .enter()\n        .append('rect')\n        .attr('class', 'result')\n        .attr('width', mstwidth)\n        .style('fill', (_d, index) => resultsColorScheme[index])\n        .attr('height', function (_d, index) {return barHeight(index, 2);})\n        .attr('x', 0)\n        .attr('y', function (_d, index) { return middlePosition(barHeight(index, 2), extentY);})\n        .on('mouseover', restip.mouseover)\n        .on('mouseout', restip.mouseout)\n        .on('mouseleave', restip.mouseleave);\n\n      // Update the maxresultmarker marker lines.\n\n      // Draw the markers\n      wrap\n        .selectAll('line.marker')\n        .data(cresults)\n        .enter().append('polygon')\n        .attr('class', 'marker')\n        .style('stroke', (_d, index) => resultsColorScheme[index])\n        .style('stroke-width', (_d, index) => baseStrokeWidth * (index + 1))\n        .attr('points', function (d, index) {\n            const size = baseArrowSize / (index + 1);\n            return pointerMaker(size, baseArrowSize, scaleX(d), innerHeight());\n          }\n        );\n\n      const axis = wrap.append('g').attr('class', 'axis');\n      axis.attr('transform', `translate(0,${extentY})`).call(d3AxisBottom(scaleX));\n\n      // Graph Marker\n\n      wrap\n        .selectAll('line.limits')\n        .data([0, graphWidth])\n        .enter()\n        .append('line')\n        .attr('class', 'limits')\n        .style('stroke', '#000')\n        .style('stroke-width', graphMarginH)\n        .attr('x1', scaleX)\n        .attr('x2', scaleX)\n        .attr('y1', function (_d, index) {return (extentY / 2 - markHeight(index) / 2);})\n        .attr('y2', function (_d, index) {return (extentY / 2 + markHeight(index) / 2);});\n\n      // Add label in the middle\n      wrap\n        .selectAll('text.label')\n        .data([d.groupname])\n        .enter()\n        .append('text')\n        .attr('class', 'label')\n        .attr('y', extentY / 2)\n        .attr('x', extentX / 2)\n        .text((d) => d);\n      // Finally translate the graph so it appear next to the other\n\n      currentg.attr('transform', 'translate(' + (margins.left + graphWidth * i + graphMarginH * i) + ',' + margins.top + ')');\n    });\n    d3TimerFlush();\n  }\n\n  // maxresults (previous, goal)\n  bulCVS.maxresults = function (_) {\n    if (!arguments.length) return maxresults;\n    maxresults = _;\n    return this;\n  };\n\n  // results (actual, forecast)\n  bulCVS.results = function (_) {\n    if (!arguments.length) return results;\n    results = _;\n    return this;\n  };\n\n  bulCVS.width = function (_) {\n    if (!arguments.length) return width;\n    width = +_;\n    return this;\n  };\n\n  bulCVS.height = function (_) {\n    if (!arguments.length) return height;\n    height = +_;\n    return this;\n  };\n\n  bulCVS.margins = function (_) {\n    if (!arguments.length) return margins;\n    margins = _;\n    return this;\n  };\n\n  bulCVS.data = function (_) {\n    if (!arguments.length) return data;\n    data = _;\n    return this;\n  };\n\n  bulCVS.tickFormat = function (_) {\n    if (!arguments.length) return xAxis.tickFormat();\n    xAxis.tickFormat(_);\n    return this;\n  };\n\n  return bulCVS;\n}\n\nfunction bulCVSWidth (x) {\n  const x0 = x(0);\n  return function (d) {\n    return Math.abs(x(d) - x0);\n  };\n}\n\n/**\n * Create a triangle oriented toward the bottom, point toward x,y\n * @param base\n * @param height\n * @param x\n * @param y\n */\nfunction pointerMaker (base, height, x, y) {\n  return `${x - base / 2} ${y - height}, ${x + base / 2} ${y - height}, ${x} ${y}`;\n}\n\nfunction d3Tooltip (displayFunction) {\n\n  let tooltip = {};\n  // create a tooltip\n  let tid = 'd3tooltipdiv' + btoa(Math.random()).substring(0, 12);\n  var Tooltip = d3Select('body')\n    .select('#' + tid)\n    .data([0]) // Force add this\n    .enter()\n    .append('div')\n    .style('position', 'absolute')\n    .style('opacity', 0)\n    .attr('class', 'tooltip')\n    .attr('id', tid)\n    .style('background-color', 'white')\n    .style('border', 'solid')\n    .style('border-width', '2px')\n    .style('border-radius', '5px')\n    .style('padding', '5px');\n\n  // Three function that change the tooltip when user hover / move / leave a cell\n  tooltip.mouseover = function (d, index) {\n    Tooltip\n      .style('stroke', 'black')\n      .style('opacity', 1)\n      .html(displayFunction(d, index))\n      .style('left', (d3Mouse(this)[0]) + 'px')\n      .style('top', (d3Mouse(this)[1]) + 'px');\n  };\n  tooltip.mousemove = function (d, index) {\n    Tooltip\n      .style('left', (d3Mouse(this)[0]) + 'px')\n      .style('top', (d3Mouse(this)[1]) + 'px');\n\n  };\n  tooltip.mouseleave = function (d, index) {\n    Tooltip\n      .style('opacity', 0)\n      .style('stroke', 'none');\n  };\n  return tooltip;\n\n}\n"],"names":["d3Select","d3ScaleLinear","d3SchemeSet1","d3AxisBottom","d3TimerFlush","d3Mouse"],"mappings":"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"}