// https://github.com/call-learning/d3-progress.git v1.0.0 Copyright 2020 Laurent David
    //  https://github.com/call-learning/d3-progress v1.0.0. Copyright 2019 SAS CALL Learning
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-axis"),require("d3-scale"),require("d3-shape")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-axis","d3-scale","d3-shape"],e):e((t=t||self).d3=t.d3||{},t.d3,t.d3,t.d3,t.d3)}(this,(function(t,e,a,r,n){"use strict";t.progress=function(){let t={},n=960,i=100,d={top:20,right:5,bottom:30,left:15},o=function(){return n-d.left-d.right},c=function(){return i-d.top-d.bottom},s=.05,l=.1,p=[0,.25,.5,.75,1];function g(e){g.addPatternDefinition(),g.addFilterDefinition(2,2,2,"linear",.5);let u=e.attr("width",n).attr("height",i).append("g").attr("class","progress-cvs").attr("transform",`translate(${d.left},0)`),f=o()*(1-2*s),h=c()*(1-2*l),m=u.append("g").attr("width",f).attr("height",h).attr("transform",`translate(0,${d.top})`);const y=r.scaleLinear().domain([0,1]).range([0,f]);m.append("rect").attr("class","background-bar").attr("width",f).attr("height",h).attr("rx",h*l).attr("ry",h*l).attr("x",0).attr("y",0);const b=d.bottom/3,x=u.append("g").attr("class","axisgraph");x.attr("transform",`translate(0,${h+d.top})`).call(a.axisBottom(y).tickValues(p).tickFormat((function(t){return Math.round(100*t)})).tickSize(b)),x.select(".domain").remove(),x.attr("font-size",b),t.forEach((function(e,a){let r=m.append("g").attr("width",f).attr("height",h/t.length).attr("rx",h*l).attr("ry",h*l).attr("class","comptype-"+e.result.type).attr("transform",`translate(0,${a*(h/t.length)})`),n=h/t.length;g.barCVS(e,r,n,y,f,h),"stopbars"in e&&r.selectAll("g.labelbar").data(e.stopbars).enter().append("rect").attr("class","barlabelbar").attr("width",o()*s/10).attr("height",(function(){return g.barHeight(n)})).attr("x",(function(t){return y(t)})).attr("y",(function(){return g.barMiddlePosition(n)}))}));let v=t.map((function(t,e){let a={};return a.value=t.result.value,a.position=1-e%2,a}));g.displayLabels(v,"labelmarker",b,u,h,y);let P=t.reduce((function(t,e,a){let r={};return"stopbars"in e&&e.stopbars.forEach((function(e){r.value=e,r.position=1-a%2,t.push(r)})),t}),[]);g.displayLabels(P,"stoplabelbar",b,u,h,y)}return g.barCVS=function(t,e,a,r,n){g.createBar(e,"bar-gray-bg",a,(function(){return n})),g.createBar(e,"bar-bg",a,(function(){return r(t.result.value)})),g.createBar(e,"bar",a,(function(){return r(t.result.value)}));let i=g.barHeight(a)/2-a*l,d=e.selectAll("g.marker").data(t.markers).enter().append("g").attr("class",(function(t){return t.active?"marker active":"marker"})).attr("x",(function(t){return r(t.value)})).attr("y",a/2);d.append("circle").attr("r",i).attr("cx",(function(t){return r(t.value)})).attr("cy",a/2),d.append("text").attr("x",(function(t){return r(t.value)})).attr("y",a/2+a*l/2).attr("alignment-baseline","middle").text((function(t){return t.label})).attr("class","marker-text").attr("font-size",a/2)},g.createBar=function(t,e,a,r){t.append("rect").attr("class",e).attr("width",r).attr("height",(function(){return g.barHeight(a)})).attr("rx",a*l*2).attr("ry",a*l*2).attr("x",0).attr("y",(function(){return g.barMiddlePosition(a)}))},g.displayLabels=function(t,e,a,r,n,i){var c=Math.sqrt(o()/25);r.selectAll("g."+e).data(t).enter().append("g").attr("class",e).append("g").attr("class",e+"-container").attr("transform",(function(t){return`translate(0,${t.position?0:2*c})`})).append("text").attr("class",e+"-text").attr("font-size",1.2*a).attr("text-anchor","middle").text((function(t){return`${Math.round(100*t.value)} %`}));var p=[];r.selectAll("text."+e+"-text").each((function(t,e){p[e]=this.getBBox(),p[e].position=t.position})),r.selectAll("g."+e+"-container").data(p).append("path").lower().attr("d",(function(t){var e=t.x-t.width*s,a=t.y-t.height*l,r=t.x+t.width-t.width*s/2,n=t.y+t.height-t.height*l/2,i=`M ${e} ${a} `;return t.position||(i+=`L ${e+(r-e)/3} ${a} `,i+=`L ${e+(r-e)/2} ${a-c} `,i+=`L ${e+2*(r-e)/3} ${a} `),i+=`L ${r} ${a} `,i+=`L ${r} ${n} `,t.position&&(i+=`L ${e+2*(r-e)/3} ${n} `,i+=`L ${e+(r-e)/2} ${n+c} `,i+=`L ${e+(r-e)/3} ${n} `),i+=`L ${e} ${n} `,i+=`L ${e} ${a} `})).attr("class",e+"-bg"),r.selectAll("g."+e).attr("transform",(function(t,e){return`translate(${i(t.value)+p[e].width*s*2},${function(t){return t?d.top-c:d.top+n+c}(t.position)})`}))},g.barHeight=function(t){return t*(1-2*l)},g.barMiddlePosition=function(t){return t/2-g.barHeight(t)/2},g.width=function(t){return arguments.length?(n=+t,this):n},g.height=function(t){return arguments.length?(i=+t,this):i},g.margins=function(t){return arguments.length?(d=t,this):d},g.data=function(e){return arguments.length?(t=e,this):t},g.addPatternDefinition=function(t){e.select("body").select("svg#d3progresspatternsdef").empty()&&e.select("body").append("svg").attr("id","d3progresspatternsdef").append("defs").selectAll("pattern").data([{pattername:"crosshatch",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnPgogIDxyZWN0IHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyNmZmYnLz4KICA8cGF0aCBkPSdNMCAwTDggOFpNOCAwTDAgOFonIHN0cm9rZS13aWR0aD0nMC41JyBzdHJva2U9JyNhYWEnLz4KPC9zdmc+Cg=="},{pattername:"diagonal-stripe-3",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+"},{pattername:"whitecarbon",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB3aWR0aD0nNicgaGVpZ2h0PSc2Jz4KICA8cmVjdCB3aWR0aD0nNicgaGVpZ2h0PSc2JyBmaWxsPScjZWVlZWVlJy8+CiAgPGcgaWQ9J2MnPgogICAgPHJlY3Qgd2lkdGg9JzMnIGhlaWdodD0nMycgZmlsbD0nI2U2ZTZlNicvPgogICAgPHJlY3QgeT0nMScgd2lkdGg9JzMnIGhlaWdodD0nMicgZmlsbD0nI2Q4ZDhkOCcvPgogIDwvZz4KICA8dXNlIHhsaW5rOmhyZWY9JyNjJyB4PSczJyB5PSczJy8+Cjwvc3ZnPg=="},{pattername:"dots-7",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScgLz4KICA8cmVjdCB4PScwJyB5PScwJyB3aWR0aD0nNycgaGVpZ2h0PSc3JyBmaWxsPSdibGFjaycgLz4KPC9zdmc+"}]).enter().append("pattern").attr("id",(function(t){return t.pattername})).attr("patternUnits","userSpaceOnUse").attr("width",10).attr("height",10).append("image").attr("xlink:href",(function(t){return t.imagedef})).attr("x",0).attr("y",0).attr("width",10).attr("height",10)},g.addFilterDefinition=function(t,a,r,n,i){if(e.select("body").select("svg#d3progressfiltersdef").empty()){var d=e.select("body").append("svg").attr("id","d3progressfiltersdef").append("defs").append("filter").attr("id","d3std-dropshadow");d.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",parseInt(r)),d.append("feOffset").attr("dx",t).attr("dy",a),d.append("feComponentTransfer").append("feFuncA").attr("type",n).attr("slope",parseFloat(i));var o=d.append("feMerge");o.append("feMergeNode"),o.append("feMergeNode").attr("in","SourceGraphic")}},g},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=d3-progress.min.js.map
