// https://github.com/call-learning/d3-progress.git v1.0.0 Copyright 2020 Laurent David
    //  https://github.com/call-learning/d3-progress v1.0.0. Copyright 2019 SAS CALL Learning
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-axis"),require("d3-scale"),require("d3-shape")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-axis","d3-scale","d3-shape"],e):e((t=t||self).d3=t.d3||{},t.d3,t.d3,t.d3,t.d3)}(this,(function(t,e,a,r,n){"use strict";t.progress=function(){let t={},i=960,d=100,s={top:20,right:5,bottom:30,left:15},c=function(){return i-s.left-s.right},o=function(){return d-s.top-s.bottom},l=.05,p=.1,g=[0,.5,1];function u(e){u.addPatternDefinition(),u.addFilterDefinition(2,2,2,"linear",.5);let f=e.attr("width",i).attr("height",d).append("g").attr("class","progress-cvs").attr("transform",`translate(${s.left},0)`),h=c()*(1-2*l),m=o()*(1-2*p),y=f.append("g").attr("width",h).attr("height",m).attr("transform",`translate(0,${s.top})`);const x=r.scaleLinear().domain([0,1]).range([0,h]);y.append("rect").attr("class","background-bar").attr("width",h).attr("height",m).attr("rx",m*p).attr("ry",m*p).attr("x",0).attr("y",0);const b=s.bottom/3,v=f.append("g").attr("class","axisgraph");v.attr("transform",`translate(0,${m+s.top})`).call(a.axisBottom(x).tickValues(g).tickFormat((function(t){return Math.round(100*t)})).tickSize(b)),v.select(".domain").remove(),v.attr("font-size",b),t.forEach((function(e,a){let r=y.append("g").attr("width",h).attr("height",m/t.length).attr("rx",m*p).attr("ry",m*p).attr("class","comptype-"+e.result.type).attr("transform",`translate(0,${a*(m/t.length)})`),i=m/t.length;if(u.barCVS(e,r,i,x,h,m),"starmarkers"in e){var d=n.symbol().size(4*u.barHeight(i)).type(n.symbolStar),s=u.barHeight(i)/2+i*p;r.append("g").data(e.starmarkers).attr("class","starmarker").append("path").attr("transform",(function(t){return`translate(${x(t)},${s})`})).attr("d",d)}}));let C=t.map((function(t,e){let a={};return a.value=t.result.value,a.position=1-e%2,a}));u.displayLabels(C,"labelmarker",b,f,m,x);let J=t.reduce((function(t,e,a){let r={};return"starmarkers"in e&&e.starmarkers.forEach((function(e){r.value=e,r.position=1-a%2,t.push(r)})),t}),[]);u.displayLabels(J,"stoplabelstar",b,f,m,x)}return u.barCVS=function(t,e,a,r,n){u.createBar(e,"bar-gray-bg",a,(function(){return n})),u.createBar(e,"bar-bg",a,(function(){return r(t.result.value)})),u.createBar(e,"bar",a,(function(){return r(t.result.value)}));let i=u.barHeight(a)/2-a*p,d=e.selectAll("g.marker").data(t.markers).enter().append("g").attr("class",(function(t){return t.active?"marker active":"marker"})).attr("x",(function(t){return r(t.value)})).attr("y",a/2);d.append("circle").attr("r",i).attr("cx",(function(t){return r(t.value)})).attr("cy",a/2),d.append("text").attr("x",(function(t){return r(t.value)})).attr("y",a/2+a*p/2).attr("alignment-baseline","middle").text((function(t){return t.label})).attr("class","marker-text").attr("font-size",a/2)},u.createBar=function(t,e,a,r){t.append("rect").attr("class",e).attr("width",r).attr("height",(function(){return u.barHeight(a)})).attr("rx",a*p*2).attr("ry",a*p*2).attr("x",0).attr("y",(function(){return u.barMiddlePosition(a)}))},u.displayLabels=function(t,e,a,r,n,i){var d=Math.sqrt(c()/25);r.selectAll("g."+e).data(t).enter().append("g").attr("class",e).append("g").attr("class",e+"-container").attr("transform",(function(t){return`translate(0,${t.position?0:2*d})`})).append("text").attr("class",e+"-text").attr("font-size",1.2*a).attr("text-anchor","middle").text((function(t){return`${Math.round(100*t.value)} %`}));var o=[];r.selectAll("text."+e+"-text").each((function(t,e){o[e]=this.getBBox(),o[e].position=t.position})),r.selectAll("g."+e+"-container").data(o).append("path").lower().attr("d",(function(t){var e=t.x-t.width*l,a=t.y-t.height*p,r=t.x+t.width-t.width*l/2,n=t.y+t.height-t.height*p/2,i=`M ${e} ${a} `;return t.position||(i+=`L ${e+(r-e)/3} ${a} `,i+=`L ${e+(r-e)/2} ${a-d} `,i+=`L ${e+2*(r-e)/3} ${a} `),i+=`L ${r} ${a} `,i+=`L ${r} ${n} `,t.position&&(i+=`L ${e+2*(r-e)/3} ${n} `,i+=`L ${e+(r-e)/2} ${n+d} `,i+=`L ${e+(r-e)/3} ${n} `),i+=`L ${e} ${n} `,i+=`L ${e} ${a} `})).attr("class",e+"-bg"),r.selectAll("g."+e).attr("transform",(function(t,e){return`translate(${i(t.value)+o[e].width*l*2},${function(t){return t?s.top-d:s.top+n+d}(t.position)})`}))},u.barHeight=function(t){return t*(1-2*p)},u.barMiddlePosition=function(t){return t/2-u.barHeight(t)/2},u.width=function(t){return arguments.length?(i=+t,this):i},u.height=function(t){return arguments.length?(d=+t,this):d},u.margins=function(t){return arguments.length?(s=t,this):s},u.data=function(e){return arguments.length?(t=e,this):t},u.addPatternDefinition=function(t){e.select("body").select("svg#d3progresspatternsdef").empty()&&e.select("body").append("svg").attr("id","d3progresspatternsdef").append("defs").selectAll("pattern").data([{pattername:"crosshatch",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnPgogIDxyZWN0IHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyNmZmYnLz4KICA8cGF0aCBkPSdNMCAwTDggOFpNOCAwTDAgOFonIHN0cm9rZS13aWR0aD0nMC41JyBzdHJva2U9JyNhYWEnLz4KPC9zdmc+Cg=="},{pattername:"diagonal-stripe-3",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+"},{pattername:"whitecarbon",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB3aWR0aD0nNicgaGVpZ2h0PSc2Jz4KICA8cmVjdCB3aWR0aD0nNicgaGVpZ2h0PSc2JyBmaWxsPScjZWVlZWVlJy8+CiAgPGcgaWQ9J2MnPgogICAgPHJlY3Qgd2lkdGg9JzMnIGhlaWdodD0nMycgZmlsbD0nI2U2ZTZlNicvPgogICAgPHJlY3QgeT0nMScgd2lkdGg9JzMnIGhlaWdodD0nMicgZmlsbD0nI2Q4ZDhkOCcvPgogIDwvZz4KICA8dXNlIHhsaW5rOmhyZWY9JyNjJyB4PSczJyB5PSczJy8+Cjwvc3ZnPg=="},{pattername:"dots-7",imagedef:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScgLz4KICA8cmVjdCB4PScwJyB5PScwJyB3aWR0aD0nNycgaGVpZ2h0PSc3JyBmaWxsPSdibGFjaycgLz4KPC9zdmc+"}]).enter().append("pattern").attr("id",(function(t){return t.pattername})).attr("patternUnits","userSpaceOnUse").attr("width",10).attr("height",10).append("image").attr("xlink:href",(function(t){return t.imagedef})).attr("x",0).attr("y",0).attr("width",10).attr("height",10)},u.addFilterDefinition=function(t,a,r,n,i){if(e.select("body").select("svg#d3progressfiltersdef").empty()){var d=e.select("body").append("svg").attr("id","d3progressfiltersdef").append("defs").append("filter").attr("id","d3std-dropshadow");d.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",parseInt(r)),d.append("feOffset").attr("dx",t).attr("dy",a),d.append("feComponentTransfer").append("feFuncA").attr("type",n).attr("slope",parseFloat(i));var s=d.append("feMerge");s.append("feMergeNode"),s.append("feMergeNode").attr("in","SourceGraphic")}},u},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=d3-progress.min.js.map
