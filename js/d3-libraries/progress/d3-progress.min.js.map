{"version":3,"file":"d3-progress.min.js","sources":["../src/progress.js"],"sourcesContent":["import { select as d3Select } from 'd3-selection';\nimport { axisBottom as d3AxisBottom } from 'd3-axis';\nimport { scaleLinear as d3ScaleLinear } from 'd3-scale';\nimport { symbol as d3Symbol, symbolStar as d3SymbolStar } from 'd3-shape';\n\n/**\n * Make a data structure to hold a progress bar with markers\n * @return {progressChart}\n */\nexport default function () {\n  let data = {};\n  let width = 960;\n  let height = 100;\n  let graphMargins = { top: 20, right: 5, bottom: 30, left: 15 }; // Absolute margins\n  let graphWidth = function () { return width - graphMargins.left - graphMargins.right; };\n  let graphHeight = function () { return height - graphMargins.top - graphMargins.bottom; };\n  let marginW = 0.05;\n  let marginH = 0.1;\n\n  let ticksValues = [0, 0.50, 1];\n\n  // For each small multipleâ€¦\n  function progressCVS (svgitem) {\n\n    // Prepare for patterns\n    progressCVS.addPatternDefinition();\n    progressCVS.addFilterDefinition(2, 2, 2, 'linear', 0.5);\n\n    // This wrapper contains the graph and the axis\n    let wrap = svgitem\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .attr('class', 'progress-cvs')\n      .attr('transform', `translate(${graphMargins.left},0)`);\n\n    // Then for each bar/results, we need to loop through and get the progress bar\n    // This is just the graph without axis\n    let extentX = graphWidth() * (1 - marginW * 2);\n    let extentY = graphHeight() * (1 - marginH * 2);\n    let graphWrap = wrap\n      .append('g')\n      .attr('width', extentX)\n      .attr('height', extentY)\n      .attr('transform', `translate(0,${graphMargins.top})`);\n\n    // Scales\n    const scaleX = d3ScaleLinear()\n      .domain([0, 1])\n      .range([0, extentX]);\n\n    // Draw grey background\n    graphWrap.append('rect')\n      .attr('class', 'background-bar')\n      .attr('width', extentX)\n      .attr('height', extentY)\n      .attr('rx', extentY * marginH)\n      .attr('ry', extentY * marginH)\n      .attr('x', 0)\n      .attr('y', 0);\n\n    const tickFormat = function (val) {return Math.round(val * 100);};\n    const tickSize = graphMargins.bottom / 3;\n\n    // Add the bottom axes\n    const axisgraph = wrap.append('g').attr('class', 'axisgraph');\n    axisgraph.attr('transform', `translate(0,${extentY + graphMargins.top})`).call(\n      d3AxisBottom(scaleX)\n        .tickValues(ticksValues)\n        .tickFormat(tickFormat)\n        .tickSize(tickSize)\n    );\n    // Fixup style\n    axisgraph.select('.domain').remove();\n    axisgraph.attr('font-size', tickSize); // 80% of the margin\n\n    // Now the bars\n\n    // Draw results\n    data.forEach(function (currentData, index) {\n      let wrapper = graphWrap.append('g')\n        .attr('width', extentX)\n        .attr('height', extentY / data.length)\n        .attr('rx', extentY * marginH)\n        .attr('ry', extentY * marginH)\n        .attr('class', 'comptype-' + currentData.result.type)\n        .attr('transform', `translate(0,${index * (extentY / data.length)})`);\n\n      let maxHeight = extentY / data.length;\n      progressCVS.barCVS(currentData, wrapper, maxHeight, scaleX, extentX, extentY);\n\n      // Now the marker stars\n      if ('starmarkers' in currentData) {\n        var starSymbol =  d3Symbol().size(progressCVS.barHeight(maxHeight)*4).type(d3SymbolStar);\n        var ypos = progressCVS.barHeight(maxHeight)/2  + maxHeight * marginH;\n        wrapper.append('g')\n          .data(currentData.starmarkers)\n          .attr('class','starmarker')\n          .append('path')\n          .attr('transform', function (r)  {return `translate(${scaleX(r)},${ypos})`;})\n          .attr('d', starSymbol);\n      }\n    });\n    let resultsmarkervalues =\n      data.map(function (r, index) {\n        let labelData = {};\n        labelData.value = r.result.value;\n        labelData.position = 1 - index % 2;\n        return labelData;\n      });\n\n    progressCVS.displayLabels(resultsmarkervalues, 'labelmarker', tickSize, wrap, extentY, scaleX);\n\n    // Add stars labels labels\n    let labelstarvalues =\n      data.reduce(function (acc, currentData, dataIndex) {\n        let labelData = {};\n        if ('starmarkers' in currentData) {\n          currentData.starmarkers.forEach(function (val) {\n            labelData.value = val;\n            labelData.position = 1 - dataIndex % 2;\n            acc.push(labelData);\n          });\n        }\n        return acc;\n      }, []);\n    progressCVS.displayLabels(labelstarvalues, 'stoplabelstar', tickSize, wrap, extentY, scaleX);\n  }\n\n  progressCVS.barCVS = function (currentData, wrapper, maxHeight, scaleX, extentX) {\n    progressCVS.createBar(\n      wrapper,\n      'bar-gray-bg',\n      maxHeight,\n      function () {return extentX;}\n    );\n\n    progressCVS.createBar(\n      wrapper,\n      'bar-bg',\n      maxHeight,\n      function () {return scaleX(currentData.result.value);}\n    );\n\n    progressCVS.createBar(\n      wrapper,\n      'bar',\n      maxHeight,\n      function () {return scaleX(currentData.result.value);}\n    );\n\n    // Draw markers\n    let circleRadius = progressCVS.barHeight(maxHeight) / 2 - maxHeight * marginH;\n\n    let marker = wrapper.selectAll('g.marker')\n      .data(currentData.markers)\n      .enter()\n      .append('g')\n      .attr('class', function (d) {return d.active ? 'marker active' : 'marker';})\n      .attr('x', function (r) { return scaleX(r.value);})\n      .attr('y', maxHeight / 2);\n\n    marker.append('circle')\n      .attr('r', circleRadius)\n      .attr('cx', function (r) { return scaleX(r.value);})\n      .attr('cy', maxHeight / 2);\n\n    marker.append('text')\n      .attr('x', function (r) { return scaleX(r.value);})\n      .attr('y', maxHeight / 2 + maxHeight * marginH / 2)\n      .attr('alignment-baseline', 'middle')\n      .text(function (d) {return d.label;})\n      .attr('class', 'marker-text')\n      .attr('font-size', maxHeight / 2);\n  };\n\n  progressCVS.createBar = function (item, classname, maxHeight, widthCallBack) {\n    item.append('rect')\n      .attr('class', classname)\n      .attr('width', widthCallBack)\n      .attr('height', function () {return progressCVS.barHeight(maxHeight);})\n      .attr('rx', maxHeight * marginH * 2)\n      .attr('ry', maxHeight * marginH * 2)\n      .attr('x', 0)\n      .attr('y', function () { return progressCVS.barMiddlePosition(maxHeight);});\n  };\n\n  // labelmarker: a set of value + position (0 = top, 1 = bottom)\n  progressCVS.displayLabels = function (resultsmarkervalues, labelmarkerclass, tickSize, wrap, extentY, scaleX) {\n\n    var triangleSize = Math.sqrt(graphWidth() / 25);\n    var topPosition = function (index) {\n      return index ? graphMargins.top - triangleSize : graphMargins.top + extentY + triangleSize;\n    };\n\n    const resultsmarker = wrap\n      .selectAll('g.' + labelmarkerclass)\n      .data(resultsmarkervalues)\n      .enter()\n      .append('g')\n      .attr('class', labelmarkerclass);\n\n    resultsmarker.append('g')\n      .attr('class', labelmarkerclass + '-container')\n      .attr('transform', function (r) { return `translate(0,${r.position ? 0 : triangleSize * 2})`;})\n      .append('text')\n      .attr('class', labelmarkerclass + '-text')\n      .attr('font-size', tickSize * 1.2)\n      .attr('text-anchor', 'middle')\n      .text(function (r) {return `${Math.round(r.value * 100)} %`;});\n\n    // Adjust rect so they are in the background\n    // Margin of few px\n    var markersbb = [];\n    wrap.selectAll('text.' + labelmarkerclass + '-text').each(function (d, i) {\n      markersbb[i] = this.getBBox();// get bounding box of text field and store it in texts array\n      markersbb[i].position = d.position;\n    });\n\n    wrap\n      .selectAll('g.' + labelmarkerclass + '-container')\n      .data(markersbb)\n      .append('path')\n      .lower()\n      .attr('d', function (bbox) {\n        var startX = bbox.x - bbox.width * marginW ;\n        var startY = bbox.y - bbox.height * marginH ;\n        var endX = (bbox.x + bbox.width) - bbox.width * marginW / 2;\n        var endY = (bbox.y + bbox.height) - bbox.height * marginH / 2;\n        var path = `M ${startX} ${startY} `;\n        if (!bbox.position) { // Top triangle\n          path += `L ${startX + (endX - startX) / 3} ${startY} `;\n          path += `L ${startX + (endX - startX) / 2} ${(startY - triangleSize)} `;\n          path += `L ${startX + 2 * (endX - startX) / 3} ${startY} `;\n\n        }\n        path += `L ${endX} ${startY} `;\n        path += `L ${endX} ${endY} `;\n        if (bbox.position) { // Bottom triangle\n          path += `L ${startX + 2 * (endX - startX) / 3} ${endY} `;\n          path += `L ${startX + (endX - startX) / 2} ${endY + triangleSize} `;\n          path += `L ${startX + (endX - startX) / 3} ${endY} `;\n        }\n        path += `L ${startX} ${endY} `;\n        path += `L ${startX} ${startY} `;\n        return path;\n\n      })\n      .attr('class', labelmarkerclass + '-bg');\n\n      wrap.selectAll('g.' + labelmarkerclass)\n        .attr('transform', function (r, index)\n        {\n          var translateX = scaleX(r.value) + markersbb[index].width * marginW * 2 ;\n          var translateY = topPosition(r.position);\n          return `translate(${translateX},${translateY})`;\n        });\n  };\n\n  progressCVS.barHeight = function (maxHeight) { return maxHeight * (1 - marginH * 2); };\n  progressCVS.barMiddlePosition = function (maxHeight) { return maxHeight / 2 - progressCVS.barHeight(maxHeight) / 2; };\n\n  progressCVS.width = function (_) {\n    if (!arguments.length) return width;\n    width = +_;\n    return this;\n  };\n\n  progressCVS.height = function (_) {\n    if (!arguments.length) return height;\n    height = +_;\n    return this;\n  };\n\n  progressCVS.margins = function (_) {\n    if (!arguments.length) return graphMargins;\n    graphMargins = _;\n    return this;\n  };\n\n  progressCVS.data = function (_) {\n    if (!arguments.length) return data;\n    data = _;\n    return this;\n  };\n\n  progressCVS.addPatternDefinition = function (_) {\n    // See https://iros.github.io/patternfills/sample_d3.html\n    var availablepatterns = [\n      {\n        pattername: 'crosshatch',\n        imagedef: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnPgogIDxyZWN0IHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyNmZmYnLz4KICA8cGF0aCBkPSdNMCAwTDggOFpNOCAwTDAgOFonIHN0cm9rZS13aWR0aD0nMC41JyBzdHJva2U9JyNhYWEnLz4KPC9zdmc+Cg=='\n      },\n      {\n        pattername: 'diagonal-stripe-3',\n        imagedef: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+'\n      },\n      {\n        pattername: 'whitecarbon',\n        imagedef: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB3aWR0aD0nNicgaGVpZ2h0PSc2Jz4KICA8cmVjdCB3aWR0aD0nNicgaGVpZ2h0PSc2JyBmaWxsPScjZWVlZWVlJy8+CiAgPGcgaWQ9J2MnPgogICAgPHJlY3Qgd2lkdGg9JzMnIGhlaWdodD0nMycgZmlsbD0nI2U2ZTZlNicvPgogICAgPHJlY3QgeT0nMScgd2lkdGg9JzMnIGhlaWdodD0nMicgZmlsbD0nI2Q4ZDhkOCcvPgogIDwvZz4KICA8dXNlIHhsaW5rOmhyZWY9JyNjJyB4PSczJyB5PSczJy8+Cjwvc3ZnPg=='\n      },\n      {\n        pattername: 'dots-7',\n        imagedef: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScgLz4KICA8cmVjdCB4PScwJyB5PScwJyB3aWR0aD0nNycgaGVpZ2h0PSc3JyBmaWxsPSdibGFjaycgLz4KPC9zdmc+'\n      },\n    ];\n\n    var svgpattern = d3Select('body').select('svg#d3progresspatternsdef');\n    if (svgpattern.empty()) {\n      d3Select('body')\n        .append('svg')\n        .attr('id', 'd3progresspatternsdef')\n        .append('defs')\n        .selectAll('pattern')\n        .data(availablepatterns)\n        .enter()\n        .append('pattern')\n        .attr('id', function (d) {return d.pattername;})\n        .attr('patternUnits', 'userSpaceOnUse')\n        .attr('width', 10)\n        .attr('height', 10)\n        .append('image')\n        .attr('xlink:href', function (d) {return d.imagedef;})\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('width', 10)\n        .attr('height', 10);\n    }\n  };\n\n  progressCVS.addFilterDefinition = function (dx, dy, stdDeviation, type, slope) {\n    var svgpattern = d3Select('body').select('svg#d3progressfiltersdef');\n    if (svgpattern.empty()) {\n      var defs = d3Select('body')\n        .append('svg')\n        .attr('id', 'd3progressfiltersdef')\n        .append('defs');\n      var filter = defs.append('filter')\n        .attr('id', 'd3std-dropshadow');\n      filter.append('feGaussianBlur')\n        .attr('in', 'SourceAlpha')\n        .attr('stdDeviation', parseInt(stdDeviation));\n\n      filter.append('feOffset')\n        .attr('dx', dx)\n        .attr('dy', dy);\n      var feComponentTransfer = filter.append('feComponentTransfer');\n      feComponentTransfer.append('feFuncA')\n        .attr('type', type)\n        .attr('slope', parseFloat(slope));\n\n      var feMerge = filter.append('feMerge');\n      feMerge.append('feMergeNode');\n      feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n\n    }\n  };\n\n  return progressCVS;\n}\n\n\n"],"names":["data","width","height","graphMargins","top","right","bottom","left","graphWidth","graphHeight","marginW","marginH","ticksValues","progressCVS","svgitem","addPatternDefinition","addFilterDefinition","wrap","attr","append","extentX","extentY","graphWrap","scaleX","d3ScaleLinear","domain","range","tickSize","axisgraph","call","d3AxisBottom","tickValues","tickFormat","val","Math","round","select","remove","forEach","currentData","index","wrapper","length","result","type","maxHeight","barCVS","starSymbol","d3Symbol","size","barHeight","d3SymbolStar","ypos","starmarkers","r","resultsmarkervalues","map","labelData","value","position","displayLabels","labelstarvalues","reduce","acc","dataIndex","push","createBar","circleRadius","marker","selectAll","markers","enter","d","active","text","label","item","classname","widthCallBack","barMiddlePosition","labelmarkerclass","triangleSize","sqrt","markersbb","each","i","this","getBBox","lower","bbox","startX","x","startY","y","endX","endY","path","topPosition","_","arguments","margins","d3Select","empty","pattername","imagedef","dx","dy","stdDeviation","slope","filter","parseInt","parseFloat","feMerge"],"mappings":"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"}