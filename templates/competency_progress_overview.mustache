{{!
   This file is part of Moodle - http://moodle.org/

   Moodle is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   Moodle is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
 }}
{{!
  @local_competvetsuivi

  CompetVetSuivi page template for a single competency with just one level down
  A click on the competency name will go to the relevant page for this competency

  Classes required for JS: all the boostrap classes for display

  Data attributes required for JS:

  Context variables required for this template:

  Example context (json):
  {
    "comp_fullname": the fullname of the current competency,
    "comp_types" : [ 'comp_type_id': numid, 'comp_type_name': fullname ]
    "breadcrumb": [ {'name': , 'link'}
    "compitems" : [
        {
            "competency_fn": competency fullname,
            "competency_sn": competency shortname,
            "competency_link": competency link to the page,
            "comptypegraphs": graphdata per strand as an array
                        [
                        { } , ...
                        ]

    ]
  }


}}
<div>
    <div>
        <span>
        {{#breadcrumbs}}
                <a href="{{link}}">{{name}}</a> /
        {{/breadcrumbs}}
        </span>
    </div>
    <div>
        <h3>{{comp_fullname}}</h3>
        <div class="progress-cvs float-right">
            {{#comp_types}}
                <svg width="3em" height="3em">
                    <g class="comptype-{{comp_type_id}}">
                        <g class="marker">
                            <circle  cx="1em" cy="1em" r="0.5em"/>
                        </g>
                    </g>
                </svg>
                <span>{{comp_type_name}}</span>
            {{/comp_types}}
            <svg width="3em" height="3em">
                <g class="comptype-1">
                    <g class="marker">
                        <circle cx="1em" cy="1em" r="1em"/>
                        <text x="1em" y="1em" font-size="1em">1</text>
                    </g>
                </g>
            </svg>
            <span>Milestone</span>
        </div>
    </div>
    <div class="clearfix"></div>
    <div>
        {{#compitems}}

            <div class="row">
                <div class="col-12">
                    {{#competency_link}}
                        <a href="{{competency_link}}">
                    {{/competency_link}}
                    {{competency_fn}}
                    {{#competency_link}}
                        </a>
                    {{/competency_link}}
                </div>
            </div>
            <div class="row">
                <div class="col-2">
                    <div>{{competency_sn}}</div>
                </div>
                <div class="col-10">
                    <div>
                        {{#comptypesgraphs}}
                            {{#graphdata}}
                                <div class="row">
                                    <div class="col-12">
                                        {{> local_competvetsuivi/chart_item }}
                                    </div>
                                </div>
                            {{/graphdata}}
                        {{/comptypesgraphs}}
                    </div>
                </div>
            </div>

        {{/compitems}}
    </div>

</div>
