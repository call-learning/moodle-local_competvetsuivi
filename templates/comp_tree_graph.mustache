{{!
   This file is part of Moodle - http://moodle.org/

   Moodle is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   Moodle is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
 }}
{{!
  @local_competvetsuivi

  CompetVetSuivi graph tree template

  The purpose of this template is to generate a graph using the Chart library

  Classes required for JS:
  * graph-class

  Data attributes required for JS:
  * data-graph-type

  Context variables required for this template:
  * competencygraphs: [
    {
        graphdata: {grap context, see graph.mustache}
    }

}}
<table class="generaltable boxaligncenter flexible-wrap" id="{{uniqid}}">
    <thead>
    <th>{{#str}}competencies,local_competvetsuivi{{/str}}</th>
    <th>{{#str}}currentprogress,local_competvetsuivi{{/str}}</th>
    </thead>

    {{#competencygraphs}}
        <tr data-comp-path="{{comppath}}" data-comp-level="{{complevel}}">
            <td>{{shortname}}
                <span class="collapse-btn">{{# pix }} t/collapsed, core {{/ pix }}</span>
                <span class="expand-btn">{{# pix }} t/expanded, core {{/ pix }}</span></td>
            <td>{{> local_competvetsuivi/chart_item }}</td>
        </tr>
    {{/competencygraphs}}
</table>

{{#js}}
    require(['local_competvetsuivi/collapsible-comp-table'], function(treegraph) {
        treegraph.init('{{uniqid}}');
    });
{{/js}}