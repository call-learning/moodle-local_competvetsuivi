define(["jquery","core/config","local_competvetsuivi/config","d3","d3-bullet-cvs","d3-progress"],function(a,b,c,d,e,f){return{default_padding:{top:10,right:5,bottom:10,left:5},bullet_charts:function(b,c){this.load_css("/local/competvetsuivi/js/d3-libraries/bullet-cvs/d3-bullet-cvs.css");var f="#"+b,g=a(f).first(),h=Object.assign(c.padding||{},this.default_padding),i=g.parent().width()-h.left-h.right,j=g.parent().height()-h.top-h.bottom,k=e.bulletcvs().width(i).height(j).data(c);d.select(f).call(k)},progress_charts:function(b,c){this.load_css("/local/competvetsuivi/js/d3-libraries/progress/d3-progress.css");var e=this;a(document).ready(function(){var g="#"+b,h=a(g).first(),i=Object.assign(c.padding||{},e.default_padding),j=h.width()-i.left-i.right,k=h.height()-i.top-i.bottom,l=f.progress().width(j).height(k).data(c);d.select(g).call(l)})},ring_charts:function(b,c){var e=this;a(document).ready(function(){var f="#"+b,g=a(f).first(),h=e.default_padding,i=g.parent().width()-h.left-h.right,j=g.parent().height()-h.top-h.bottom,k=Math.min(i,j)/2,l=d.scaleOrdinal().range(d.schemeDark2),m=d.arc().outerRadius(k-10).innerRadius(k/2),n=d.arc().outerRadius(k).innerRadius(k-10),o=d.select(f).attr("width",i).attr("height",j).append("g").attr("transform","translate("+i/2+","+j/2+")"),p=d.pie().value(function(a){return a.val}),q=p(Object.values(c.compsvalues)),r=o.selectAll(".arc").data(q).enter().append("g").attr("class","arc");r.append("path").attr("d",m).style("fill",function(a,b){return l(b)}).style("stroke","black"),o.append("g").classed("lines",!0),o.append("g").classed("labels",!0),o.select(".lines").selectAll("polyline").data(q).enter().append("polyline").attr("stroke","black").style("fill","none").attr("stroke-width",1).attr("points",function(a){var b=m.centroid(a),c=n.centroid(a),d=n.centroid(a),e=a.startAngle+(a.endAngle-a.startAngle)/2;return d[0]=.95*k*(e<Math.PI?1:-1),[b,c,d]});var s=o.select(".labels").selectAll("text").data(q).enter().append("text").attr("transform",function(a){var b=n.centroid(a),c=a.startAngle+(a.endAngle-a.startAngle)/2;return b[0]=.99*k*(c<Math.PI?1:-1),"translate("+b+")"});s.append("tspan").text(function(a){return a.data.shortname+" - "+Math.round(100*a.data.val)+"%"}).attr("class","sn-label").style("text-anchor",function(a){var b=a.startAngle+(a.endAngle-a.startAngle)/2;return b<Math.PI?"start":"end"}),s.append("tspan").text(function(a){return a.data.fullname}).attr("class","fn-label").attr("dy","1.2em").attr("x","0").style("text-anchor",function(a){var b=a.startAngle+(a.endAngle-a.startAngle)/2;return b<Math.PI?"start":"end"})})},load_css:function(a){var c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=b.wwwroot+a,document.getElementsByTagName("head")[0].appendChild(c)}}});